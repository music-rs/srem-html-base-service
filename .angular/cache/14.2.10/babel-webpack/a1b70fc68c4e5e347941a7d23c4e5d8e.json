{"ast":null,"code":"import _createForOfIteratorHelper from \"D:/Projects/music-rs/srem-html-base-service/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"D:/Projects/music-rs/srem-html-base-service/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Projects/music-rs/srem-html-base-service/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { create } from 'nouislider';\nimport { Component, ElementRef, EventEmitter, Input, NgModule, NgZone, Output, Renderer2, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport * as ɵngcc0 from '@angular/core';\n\nvar DefaultFormatter = /*#__PURE__*/function () {\n  function DefaultFormatter() {\n    _classCallCheck(this, DefaultFormatter);\n  }\n\n  _createClass(DefaultFormatter, [{\n    key: \"to\",\n    value:\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    function to(value) {\n      // formatting with http://stackoverflow.com/a/26463364/478584\n      return String(parseFloat(parseFloat(String(value)).toFixed(2)));\n    }\n  }, {\n    key: \"from\",\n    value:\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n    function from(value) {\n      return parseFloat(value);\n    }\n  }]);\n\n  return DefaultFormatter;\n}();\n\nvar NouisliderComponent = /*#__PURE__*/(function () {\n  var NouisliderComponent = /*#__PURE__*/function () {\n    /**\n     * @param {?} ngZone\n     * @param {?} el\n     * @param {?} renderer\n     */\n    function NouisliderComponent(ngZone, el, renderer) {\n      var _this = this;\n\n      _classCallCheck(this, NouisliderComponent);\n\n      this.ngZone = ngZone;\n      this.el = el;\n      this.renderer = renderer;\n      this.config = {};\n      this.change = new EventEmitter(true);\n      this.update = new EventEmitter(true);\n      this.slide = new EventEmitter(true);\n      this.set = new EventEmitter(true);\n      this.start = new EventEmitter(true);\n      this.end = new EventEmitter(true);\n      this.onChange = Function.prototype;\n      this.cleanups = [];\n\n      this.eventHandler = function (emitter, values, handle, unencoded) {\n        var\n        /** @type {?} */\n        v = _this.toValues(values);\n\n        var\n        /** @type {?} */\n        emitEvents = false;\n\n        if (_this.value === undefined) {\n          _this.value = v;\n          return;\n        }\n\n        if (Array.isArray(v) && _this.value[handle] != v[handle]) {\n          emitEvents = true;\n        }\n\n        if (!Array.isArray(v) && _this.value != v) {\n          emitEvents = true;\n        }\n\n        if (emitEvents) {\n          _this.ngZone.run(function () {\n            if (emitter.observers.length > 0) {\n              emitter.emit(v);\n            }\n\n            _this.onChange(v);\n          });\n        }\n\n        if (Array.isArray(v)) {\n          _this.value[handle] = v[handle];\n        } else {\n          _this.value = v;\n        }\n      };\n\n      this.defaultKeyHandler = function (e) {\n        var\n        /** @type {?} */\n        stepSize = _this.slider.steps();\n\n        var\n        /** @type {?} */\n        index = parseInt(e.target.getAttribute('data-handle'));\n        var\n        /** @type {?} */\n        sign = 1;\n        var\n        /** @type {?} */\n        multiplier = 1;\n        var\n        /** @type {?} */\n        step = 0;\n        var\n        /** @type {?} */\n        delta = 0;\n\n        switch (e.which) {\n          case 34:\n            // PageDown\n            multiplier = _this.config.pageSteps;\n\n          case 40: // ArrowDown\n\n          case 37:\n            // ArrowLeft\n            sign = -1;\n            step = stepSize[index][0];\n            e.preventDefault();\n            break;\n\n          case 33:\n            // PageUp\n            multiplier = _this.config.pageSteps;\n\n          case 38: // ArrowUp\n\n          case 39:\n            // ArrowRight\n            step = stepSize[index][1];\n            e.preventDefault();\n            break;\n\n          default:\n            break;\n        }\n\n        delta = sign * multiplier * step;\n        var\n        /** @type {?} */\n        newValue;\n\n        if (Array.isArray(_this.value)) {\n          newValue = [].concat(_this.value);\n          newValue[index] = newValue[index] + delta;\n        } else {\n          newValue = _this.value + delta;\n        }\n\n        _this.slider.set(newValue);\n      };\n    }\n    /**\n     * @return {?}\n     */\n\n\n    _createClass(NouisliderComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this2 = this;\n\n        var\n        /** @type {?} */\n        inputsConfig = JSON.parse(JSON.stringify({\n          behaviour: this.behaviour,\n          connect: this.connect,\n          limit: this.limit,\n          start: this.formControl !== undefined ? this.formControl.value : this.ngModel,\n          step: this.step,\n          pageSteps: this.pageSteps,\n          keyboard: this.keyboard,\n          onKeydown: this.onKeydown,\n          range: this.range || this.config.range || {\n            min: this.min,\n            max: this.max\n          },\n          tooltips: this.tooltips,\n          snap: this.snap,\n          animate: this.animate\n        }));\n        inputsConfig.tooltips = this.tooltips || this.config.tooltips;\n        inputsConfig.format = this.format || this.config.format || new DefaultFormatter();\n        this.ngZone.runOutsideAngular(function () {\n          _this2.slider = create(_this2.el.nativeElement.querySelector('div'), Object.assign(_this2.config, inputsConfig));\n        });\n        this.handles = [].slice.call(this.el.nativeElement.querySelectorAll('.noUi-handle'));\n\n        if (this.config.keyboard) {\n          if (this.config.pageSteps === undefined) {\n            this.config.pageSteps = 10;\n          }\n\n          var _iterator = _createForOfIteratorHelper(this.handles),\n              _step;\n\n          try {\n            var _loop = function _loop() {\n              var handle = _step.value;\n              handle.setAttribute('tabindex', 0);\n              var\n              /** @type {?} */\n              onKeydown = _this2.config.onKeydown || _this2.defaultKeyHandler;\n\n              _this2.ngZone.runOutsideAngular(function () {\n                _this2.cleanups.push(_this2.renderer.listen(handle, 'keydown', onKeydown), _this2.renderer.listen(handle, 'click', function () {\n                  handle.focus();\n                }));\n              });\n            };\n\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              _loop();\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n\n        this.slider.on('set', function (values, handle, unencoded) {\n          _this2.eventHandler(_this2.set, values, handle, unencoded);\n        });\n        this.slider.on('update', function (values, handle, unencoded) {\n          if (_this2.update.observers.length > 0) {\n            _this2.ngZone.run(function () {\n              _this2.update.emit(_this2.toValues(values));\n            });\n          }\n        });\n        this.slider.on('change', function (values, handle, unencoded) {\n          if (_this2.change.observers.length > 0) {\n            _this2.ngZone.run(function () {\n              _this2.change.emit(_this2.toValues(values));\n            });\n          }\n        });\n        this.slider.on('slide', function (values, handle, unencoded) {\n          _this2.eventHandler(_this2.slide, values, handle, unencoded);\n        });\n        this.slider.on('start', function (values, handle, unencoded) {\n          if (_this2.start.observers.length > 0) {\n            _this2.ngZone.run(function () {\n              _this2.start.emit(_this2.toValues(values));\n            });\n          }\n        });\n        this.slider.on('end', function (values, handle, unencoded) {\n          if (_this2.end.observers.length > 0) {\n            _this2.ngZone.run(function () {\n              _this2.end.emit(_this2.toValues(values));\n            });\n          }\n        });\n      }\n      /**\n       * @param {?} changes\n       * @return {?}\n       */\n\n    }, {\n      key: \"ngOnChanges\",\n      value: function ngOnChanges(changes) {\n        var _this3 = this;\n\n        if (this.slider && (changes.min || changes.max || changes.step || changes.range)) {\n          this.ngZone.runOutsideAngular(function () {\n            setTimeout(function () {\n              _this3.slider.updateOptions({\n                range: Object.assign({}, {\n                  min: _this3.min,\n                  max: _this3.max\n                }, _this3.range || {}),\n                step: _this3.step\n              });\n            });\n          });\n        }\n      }\n      /**\n       * @return {?}\n       */\n\n    }, {\n      key: \"ngOnDestroy\",\n      value: function ngOnDestroy() {\n        this.slider.destroy();\n\n        while (this.cleanups.length) {\n          this.cleanups.pop()();\n        }\n      }\n      /**\n       * @param {?} values\n       * @return {?}\n       */\n\n    }, {\n      key: \"toValues\",\n      value: function toValues(values) {\n        var\n        /** @type {?} */\n        v = values.map(this.config.format.from);\n        return v.length == 1 ? v[0] : v;\n      }\n      /**\n       * @param {?} value\n       * @return {?}\n       */\n\n    }, {\n      key: \"writeValue\",\n      value: function writeValue(value) {\n        var _this4 = this;\n\n        if (this.slider) {\n          this.ngZone.runOutsideAngular(function () {\n            setTimeout(function () {\n              _this4.slider.set(value);\n            });\n          });\n        }\n      }\n      /**\n       * @param {?} fn\n       * @return {?}\n       */\n\n    }, {\n      key: \"registerOnChange\",\n      value: function registerOnChange(fn) {\n        this.onChange = fn;\n      }\n      /**\n       * @param {?} fn\n       * @return {?}\n       */\n\n    }, {\n      key: \"registerOnTouched\",\n      value: function registerOnTouched(fn) {}\n      /**\n       * @param {?} isDisabled\n       * @return {?}\n       */\n\n    }, {\n      key: \"setDisabledState\",\n      value: function setDisabledState(isDisabled) {\n        isDisabled ? this.renderer.setAttribute(this.el.nativeElement.childNodes[0], 'disabled', 'true') : this.renderer.removeAttribute(this.el.nativeElement.childNodes[0], 'disabled');\n      }\n    }]);\n\n    return NouisliderComponent;\n  }();\n\n  NouisliderComponent.ɵfac = function NouisliderComponent_Factory(t) {\n    return new (t || NouisliderComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  NouisliderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NouisliderComponent,\n    selectors: [[\"nouislider\"]],\n    hostVars: 2,\n    hostBindings: function NouisliderComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"ng2-nouislider\", true);\n      }\n    },\n    inputs: {\n      config: \"config\",\n      disabled: \"disabled\",\n      behaviour: \"behaviour\",\n      connect: \"connect\",\n      limit: \"limit\",\n      min: \"min\",\n      max: \"max\",\n      snap: \"snap\",\n      animate: \"animate\",\n      range: \"range\",\n      step: \"step\",\n      format: \"format\",\n      pageSteps: \"pageSteps\",\n      ngModel: \"ngModel\",\n      keyboard: \"keyboard\",\n      onKeydown: \"onKeydown\",\n      formControl: \"formControl\",\n      tooltips: \"tooltips\"\n    },\n    outputs: {\n      change: \"change\",\n      update: \"update\",\n      slide: \"slide\",\n      set: \"set\",\n      start: \"start\",\n      end: \"end\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(function () {\n        return NouisliderComponent;\n      }),\n      multi: true\n    }]), ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 1,\n    template: function NouisliderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"div\");\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"disabled\", ctx.disabled ? true : undefined);\n      }\n    },\n    styles: [\"[_nghost-%COMP%] {\\n      display: block;\\n      margin-top: 1rem;\\n      margin-bottom: 1rem;\\n    }\"]\n  });\n  /**\n   * @nocollapse\n   */\n\n  return NouisliderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nvar NouisliderModule = /*#__PURE__*/(function () {\n  var NouisliderModule = /*#__PURE__*/_createClass(function NouisliderModule() {\n    _classCallCheck(this, NouisliderModule);\n  });\n\n  NouisliderModule.ɵfac = function NouisliderModule_Factory(t) {\n    return new (t || NouisliderModule)();\n  };\n\n  NouisliderModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NouisliderModule\n  });\n  NouisliderModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  /**\n   * @nocollapse\n   */\n\n  return NouisliderModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NouisliderModule, {\n    declarations: [NouisliderComponent],\n    exports: [NouisliderComponent]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { DefaultFormatter, NouisliderComponent, NouisliderModule }; //# sourceMappingURL=ng2-nouislider.js.map","map":null,"metadata":{},"sourceType":"module"}